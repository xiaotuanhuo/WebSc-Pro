<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">

<head>
    <meta charset="UTF-8">
    <title>订单管理</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <link rel="shortcut icon" type="image/x-icon" th:href="@{/favicon.ico}"/>
    <link rel="stylesheet" th:href="@{/lib/layui/css/layui.css}">
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/animate.min.css}">
    <link rel="stylesheet" th:href="@{/iconfont/iconfont.css}">
    <link rel="stylesheet" th:href="@{/lib/layui/extend/formSelects-v4.css}" />
    <style type="text/css">
    	.layui-table-tool{
    		min-height: 60px;
    	}
    	.layui-table-tool-temp {
		    padding-right: 30px;
		}
    </style>
</head>

<body>

    <div class="page-loading">
        <div class="rubik-loader"></div>
    </div>

    <div class="z-body animated fadeIn">
		<div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief" style="margin-top: -20px;text-align: right !important;">
				<ul class="layui-tab-title">
					<shiro:hasPermission name="doc:admin">
						<li class="layui-this">待审核(<span id="sc_icount_0" th:text="${sc.iCount_0}"></span>)</li>
					    <li>待分配(<span id="sc_icount_1" th:text="${sc.iCount_1}"></span>)</li>
					    <li>待接单(<span id="sc_icount_2" th:text="${sc.iCount_2}"></span>)</li>
					    <li>待手术(<span id="sc_icount_3" th:text="${sc.iCount_3}"></span>)</li>
					    <li>待完成(<span id="sc_icount_4" th:text="${sc.iCount_4}"></span>)</li>
					    <li>待取消(<span id="sc_icount_9" th:text="${sc.iCount_9}"></span>)</li>
					    <li>已完成</li>
					    <li>已取消</li>
				    </shiro:hasPermission>
				    <shiro:hasPermission name="doc:dr">
					    <li class="layui-this">待接单(<span id="sc_icount_2" th:text="${sc.iCount_2}"></span>)</li>
					    <li>待手术(<span id="sc_icount_3" th:text="${sc.iCount_3}"></span>)</li>
					    <li>已完成</li>
				    </shiro:hasPermission>
				    <shiro:hasPermission name="doc:hospital">
						<li class="layui-this">待审核(<span id="sc_icount_0" th:text="${sc.iCount_0}"></span>)</li>
					    <li>待手术(<span id="sc_icount_123" th:text="${sc.iCount_123}"></span>)</li>
					    <li>已完成</li>
					    <li>已取消</li>
				    </shiro:hasPermission>
				</ul>
			<div class="layui-tab-content" style="height: 50px;">
				<shiro:hasPermission name="doc:admin">
			    	<div class="layui-tab-item layui-show">
			    		<table class="layui-hide" id="doc-table-0" lay-filter="doc-table-0"></table>
			    	</div>
			    	<div class="layui-tab-item">
			    		<table class="layui-hide" id="doc-table-1" lay-filter="doc-table-1"></table>
			    	</div>
			    	<div class="layui-tab-item">
						<table class="layui-hide" id="doc-table-2" lay-filter="doc-table-2"></table>
					</div>
			    	<div class="layui-tab-item">
						<table class="layui-hide" id="doc-table-3" lay-filter="doc-table-3"></table>
					</div>
			    	<div class="layui-tab-item">
						<table class="layui-hide" id="doc-table-4" lay-filter="doc-table-4"></table>
					</div>
					<div class="layui-tab-item">
						<table class="layui-hide" id="doc-table-9" lay-filter="doc-table-9"></table>
					</div>
					<div class="layui-tab-item">
						<table class="layui-hide" id="doc-table-5" lay-filter="doc-table-5">
							<div class="layui-row">
								<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
							     	<label for="operateStartTime" class="layui-form-label">手术日期</label>
									<div class="layui-input-block">
										<input type="text" id="doc_table_5_operateStartTime" autocomplete="off" class="layui-input" >
									</div>
								</div>
								<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
							     	<label for="operateEndTime" class="layui-form-label">至</label>
									<div class="layui-input-block">
										<input type="text" id="doc_table_5_operateEndTime" autocomplete="off" class="layui-input" >
									</div>
								</div>
								<div class="layui-col-xs12 layui-col-sm3 layui-col-md3" style="margin-top: 8px;">
									<label for="patientName" class="layui-form-label">患者姓名</label>
									<div class="layui-input-block">
										<input type="text" id="doc_table_5_patientName" lay-vertype="tips" autocomplete="off" class="layui-input">
									</div>
								</div>
								<div class="layui-col-xs12 layui-col-sm1 layui-col-md1" style="text-align: left;padding-left: 10px;margin-top: 11px;">
									<button class="layui-btn layui-btn-sm" onclick="doc_table_5_export()">
										<i class="layui-icon layui-icon-download-circle" style="font-size: 15px;"></i>  
									</button>
								</div>
							</div>
							<div class="layui-row">
								<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
							 		<label for="qaUserName" class="layui-form-label">医生姓名</label>
									<div class="layui-input-block">
										<input type="text" id="doc_table_5_qaUserName" lay-vertype="tips" autocomplete="off" class="layui-input">
									</div>
								</div>
								<div class="layui-col-xs12 layui-col-sm7 layui-col-md7" style="margin-top: 8px;">
							 		<label for="orgId" class="layui-form-label">医疗机构</label>
									<div class="layui-input-block">
										<select id="doc_table_5_orgId" name="orgId" xm-select="org-select" xm-select-show-count="10" xm-select-max="10" xm-select-search="" xm-select-skin="normal" lay-search="">
									  		<option value="">请选择机构</option>
											<option th:each="org:${orgls}" th:value="${org.orgId}" th:text="${org.orgName}"
									       		th:selected="${#arrays.contains((orgls == null ? #arrays.toIntegerArray(new String[]{}) : orgls), org.orgId)}"></option>
									   	</select>
									</div>
								</div>
								<div class="layui-col-xs12 layui-col-sm1 layui-col-md1" style="text-align: left;padding-left: 10px;margin-top: 11px;">
									<button class="layui-btn layui-btn-sm" onclick="doc_table_5_search()">
										<i class="layui-icon layui-icon-search" style="font-size: 15px;"></i>  
									</button>
								</div>
							</div>
						</table>
					</div>
					<div class="layui-tab-item">
						<table class="layui-hide" id="doc-table-6" lay-filter="doc-table-6"></table>
					</div>
				</shiro:hasPermission>
				<shiro:hasPermission name="doc:dr">
					<div class="layui-tab-item layui-show">
						<table class="layui-hide" id="doc-table-2" lay-filter="doc-table-2"></table>
					</div>
			    	<div class="layui-tab-item">
						<table class="layui-hide" id="doc-table-3" lay-filter="doc-table-3"></table>
					</div>
					<div class="layui-tab-item">
						<table class="layui-hide" id="doc-table-5" lay-filter="doc-table-5">
							<div class="layui-row">
								<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
									<label for="patientName" class="layui-form-label">患者姓名</label>
									<div class="layui-input-block">
										<input type="text" id="doc_table_5_patientName" lay-vertype="tips" autocomplete="off" class="layui-input">
									</div>
								</div>
								<div class="layui-col-xs12 layui-col-sm7 layui-col-md7" style="margin-top: 8px;">
							 		<label for="orgId" class="layui-form-label">医疗机构</label>
									<div class="layui-input-block">
										<select id="doc_table_5_orgId" name="orgId" xm-select="org-select" xm-select-show-count="10" xm-select-max="10" xm-select-search="" xm-select-skin="normal" lay-search="">
									  		<option value="">请选择机构</option>
											<option th:each="org:${orgls}" th:value="${org.orgId}" th:text="${org.orgName}"
									       		th:selected="${#arrays.contains((orgls == null ? #arrays.toIntegerArray(new String[]{}) : orgls), org.orgId)}"></option>
									   	</select>
									</div>
								</div>
								<div class="layui-col-xs12 layui-col-sm1 layui-col-md1" style="text-align: left;padding-left: 10px;margin-top: 11px;">
								</div>
							</div>
							<div class="layui-row">
								<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
							     	<label for="operateStartTime" class="layui-form-label">手术日期</label>
									<div class="layui-input-block">
										<input type="text" id="doc_table_5_operateStartTime" autocomplete="off" class="layui-input" >
									</div>
								</div>
								<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
							     	<label for="operateEndTime" class="layui-form-label">至</label>
									<div class="layui-input-block">
										<input type="text" id="doc_table_5_operateEndTime" autocomplete="off" class="layui-input" >
									</div>
								</div>
								<div class="layui-col-xs12 layui-col-sm3 layui-col-md3" style="margin-top: 8px;">
								</div>
								<div class="layui-col-xs12 layui-col-sm1 layui-col-md1" style="text-align: left;padding-left: 10px;margin-top: 11px;">
									<button class="layui-btn layui-btn-sm" onclick="doc_table_5_search()">
										<i class="layui-icon layui-icon-search" style="font-size: 15px;"></i>  
									</button>
								</div>
							</div>
						</table>
					</div>
				</shiro:hasPermission>
				<shiro:hasPermission name="doc:hospital">
					<div class="layui-tab-item layui-show">
			    		<table class="layui-hide" id="doc-table-0" lay-filter="doc-table-0"></table>
			    	</div>
			    	<div class="layui-tab-item">
						<table class="layui-hide" id="doc-table-123" lay-filter="doc-table-123"></table>
					</div>
					<div class="layui-tab-item">
						<table class="layui-hide" id="doc-table-5" lay-filter="doc-table-5">
							<div class="layui-row">
								<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
							     	<label for="operateStartTime" class="layui-form-label">手术日期</label>
									<div class="layui-input-block">
										<input type="text" id="doc_table_5_operateStartTime" autocomplete="off" class="layui-input" >
									</div>
								</div>
								<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
							     	<label for="operateEndTime" class="layui-form-label">至</label>
									<div class="layui-input-block">
										<input type="text" id="doc_table_5_operateEndTime" autocomplete="off" class="layui-input" >
									</div>
								</div>
								<div class="layui-col-xs12 layui-col-sm3 layui-col-md3" style="margin-top: 8px;">
								</div>
							</div>
							<div class="layui-row">
								<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
							 		<label for="patientName" class="layui-form-label">患者姓名</label>
									<div class="layui-input-block">
										<input type="text" id="doc_table_5_patientName" lay-vertype="tips" autocomplete="off" class="layui-input">
									</div>
								</div>
								<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
							 		<label for="qaUserName" class="layui-form-label">医生姓名</label>
									<div class="layui-input-block">
										<input type="text" id="doc_table_5_qaUserName" lay-vertype="tips" autocomplete="off" class="layui-input">
									</div>
								</div>
								<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="text-align: left;padding-left: 10px;margin-top: 11px;">
									<button class="layui-btn layui-btn-sm" onclick="doc_table_5_search()">
										<i class="layui-icon layui-icon-search" style="font-size: 15px;"></i>  
									</button>
								</div>
							</div>
						</table>
					</div>
					<div class="layui-tab-item">
						<table class="layui-hide" id="doc-table-6" lay-filter="doc-table-6"></table>
					</div>
				</shiro:hasPermission>
		  	</div>
		</div>
    </div>
    
	<script type="text/html" id="doc-table-0-toolbar">
		<div class="layui-row">
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	     	<label for="operateStartTime" class="layui-form-label">手术日期</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_0_date" autocomplete="off" class="layui-input" >
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	 		<label for="patientName" class="layui-form-label">患者姓名</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_0_patientName" lay-vertype="tips" autocomplete="off" class="layui-input">
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="text-align: left;padding-left: 10px;margin-top: 11px;">
			<button class="layui-btn layui-btn-sm" lay-event="doc_table_0_search">
				<i class="layui-icon layui-icon-search" style="font-size: 15px;"></i>  
			</button>
		</div>
		</div>
	</script>
	
	<script type="text/html" id="doc-table-1-toolbar">
		<div class="layui-row">
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	     	<label for="operateStartTime" class="layui-form-label">手术日期</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_1_date" autocomplete="off" class="layui-input" >
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	 		<label for="patientName" class="layui-form-label">患者姓名</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_1_patientName" lay-vertype="tips" autocomplete="off" class="layui-input">
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="text-align: left;padding-left: 10px;margin-top: 11px;">
			<button class="layui-btn layui-btn-sm" lay-event="doc_table_1_search">
				<i class="layui-icon layui-icon-search" style="font-size: 15px;"></i>  
			</button>
		</div>
		</div>
	</script>
	
	<script type="text/html" id="doc-table-2-toolbar">
		<div class="layui-row">
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	     	<label for="operateStartTime" class="layui-form-label">手术日期</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_2_date" autocomplete="off" class="layui-input" >
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	 		<label for="patientName" class="layui-form-label">患者姓名</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_2_patientName" lay-vertype="tips" autocomplete="off" class="layui-input">
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="text-align: left;padding-left: 10px;margin-top: 11px;">
			<button class="layui-btn layui-btn-sm" lay-event="doc_table_2_search">
				<i class="layui-icon layui-icon-search" style="font-size: 15px;"></i>  
			</button>
		</div>
		</div>
	</script>
	
	<script type="text/html" id="doc-table-3-toolbar">
		<div class="layui-row">
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	     	<label for="operateStartTime" class="layui-form-label">手术日期</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_3_date" autocomplete="off" class="layui-input" >
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	 		<label for="patientName" class="layui-form-label">患者姓名</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_3_patientName" lay-vertype="tips" autocomplete="off" class="layui-input">
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="text-align: left;padding-left: 10px;margin-top: 11px;">
			<button class="layui-btn layui-btn-sm" lay-event="doc_table_3_search">
				<i class="layui-icon layui-icon-search" style="font-size: 15px;"></i>  
			</button>
		</div>
		</div>
	</script>
	
	<script type="text/html" id="doc-table-4-toolbar">
		<div class="layui-row">
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	     	<label for="operateStartTime" class="layui-form-label">手术日期</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_4_date" autocomplete="off" class="layui-input" >
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	 		<label for="patientName" class="layui-form-label">患者姓名</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_4_patientName" lay-vertype="tips" autocomplete="off" class="layui-input">
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="text-align: left;padding-left: 10px;margin-top: 11px;">
			<button class="layui-btn layui-btn-sm" lay-event="doc_table_4_search">
				<i class="layui-icon layui-icon-search" style="font-size: 15px;"></i>  
			</button>
		</div>
		</div>
	</script>
	
	<script type="text/html" id="doc-table-5-toolbar">
		<div class="layui-row">
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	     	<label for="operateStartTime" class="layui-form-label">手术日期</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_5_operateStartTime" autocomplete="off" class="layui-input" >
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	     	<label for="operateEndTime" class="layui-form-label">至</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_5_operateEndTime" autocomplete="off" class="layui-input" >
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm3 layui-col-md3" style="margin-top: 8px;">
			<label for="patientName" class="layui-form-label">患者姓名</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_5_patientName" lay-vertype="tips" autocomplete="off" class="layui-input">
			</div>
		</div>
		</div>
		<div class="layui-row">
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	 		<label for="qaUserName" class="layui-form-label">医生姓名</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_5_qaUserName" lay-vertype="tips" autocomplete="off" class="layui-input">
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm7 layui-col-md7" style="margin-top: 8px;">
	 		<label for="orgId" class="layui-form-label">医疗机构</label>
			<div class="layui-input-block">
				<select id="search_orgId" name="orgId" xm-select="org-select" xm-select-show-count="3" xm-select-max="10" xm-select-search="" xm-select-skin="normal" lay-search="">
			  		<option value="">请选择机构</option>
					<option th:each="org:${orgls}" th:value="${org.orgId}" th:text="${org.orgName}"
			       		th:selected="${#arrays.contains((orgls == null ? #arrays.toIntegerArray(new String[]{}) : orgls), org.orgId)}"></option>
			   	</select>
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm1 layui-col-md1" style="text-align: left;padding-left: 10px;margin-top: 11px;">
			<button class="layui-btn layui-btn-sm" lay-event="doc_table_5_search">
				<i class="layui-icon layui-icon-search" style="font-size: 15px;"></i>  
			</button>
		</div>
		</div>
		<div class="layui-row">
		<div class="layui-col-xs12 layui-col-sm8 layui-col-md8" style="margin-top: 8px;">
			
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="text-align: left;padding-left: 10px;margin-top: 11px;">
			
		</div>
		</div>
	</script>
	
	<script type="text/html" id="doc-table-6-toolbar">
		<div class="layui-row">
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	     	<label for="operateStartTime" class="layui-form-label">手术日期</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_6_date" autocomplete="off" class="layui-input" >
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	 		<label for="patientName" class="layui-form-label">患者姓名</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_6_patientName" lay-vertype="tips" autocomplete="off" class="layui-input">
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="text-align: left;padding-left: 10px;margin-top: 11px;">
			<button class="layui-btn layui-btn-sm" lay-event="doc_table_6_search">
				<i class="layui-icon layui-icon-search" style="font-size: 15px;"></i>  
			</button>
		</div>
		</div>
	</script>
	
	<script type="text/html" id="doc-table-9-toolbar">
		<div class="layui-row">
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	     	<label for="operateStartTime" class="layui-form-label">手术日期</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_9_date" autocomplete="off" class="layui-input" >
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	 		<label for="patientName" class="layui-form-label">患者姓名</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_9_patientName" lay-vertype="tips" autocomplete="off" class="layui-input">
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="text-align: left;padding-left: 10px;margin-top: 11px;">
			<button class="layui-btn layui-btn-sm" lay-event="doc_table_9_search">
				<i class="layui-icon layui-icon-search" style="font-size: 15px;"></i>  
			</button>
		</div>
		</div>
	</script>
	
	<script type="text/html" id="doc-table-123-toolbar">
		<div class="layui-row">
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	     	<label for="operateStartTime" class="layui-form-label">手术日期</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_123_date" autocomplete="off" class="layui-input" >
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="margin-top: 8px;">
	 		<label for="patientName" class="layui-form-label">患者姓名</label>
			<div class="layui-input-block">
				<input type="text" id="doc_table_123_patientName" lay-vertype="tips" autocomplete="off" class="layui-input">
			</div>
		</div>
		<div class="layui-col-xs12 layui-col-sm4 layui-col-md4" style="text-align: left;padding-left: 10px;margin-top: 11px;">
			<button class="layui-btn layui-btn-sm" lay-event="doc_table_123_search">
				<i class="layui-icon layui-icon-search" style="font-size: 15px;"></i>  
			</button>
		</div>
		</div>
	</script>
	
	<!-- 操作按钮  -->
    <script type="text/html" id="sh-column-toolbar">
		<shiro:hasPermission name="doc:info">
			<a lay-event="docinfo_0">
                <i class="zadmin-icon zadmin-icon-xinzeng zadmin-oper-area zadmin-blue" title="订单信息"></i>
            </a>
        </shiro:hasPermission>
        <shiro:hasPermission name="doc:examine">
            <a lay-event="examine">
                <i class="zadmin-icon zadmin-icon-setting zadmin-oper-area zadmin-blue" title="确认订单"></i>
            </a>
		</shiro:hasPermission>

		<shiro:hasPermission name="doc:remove">
			<a lay-event="remove">
                <i class="zadmin-icon zadmin-icon-delete zadmin-oper-area zadmin-red" title="取消订单"></i>
            </a>
        </shiro:hasPermission>
    </script>
    
    <script type="text/html" id="fp-column-toolbar">
		<shiro:hasPermission name="doc:info">
			<a lay-event="docinfo_0">
                <i class="zadmin-icon zadmin-icon-xinzeng zadmin-oper-area zadmin-blue" title="订单信息"></i>
            </a>
        </shiro:hasPermission>
        <shiro:hasPermission name="doc:distribution">
            <a lay-event="distribution">
                <i class="zadmin-icon zadmin-icon-setting zadmin-oper-area zadmin-blue" title="分配订单"></i>
            </a>
		</shiro:hasPermission>

 		<shiro:hasPermission name="doc:remove">
			<a lay-event="remove">
                <i class="zadmin-icon zadmin-icon-delete zadmin-oper-area zadmin-red" title="取消订单"></i>
            </a>
        </shiro:hasPermission>
    </script>

	<script type="text/html" id="jd-column-toolbar">
		<shiro:hasPermission name="doc:info">
			<a lay-event="docinfo_0">
                <i class="zadmin-icon zadmin-icon-xinzeng zadmin-oper-area zadmin-blue" title="订单信息"></i>
            </a>
        </shiro:hasPermission>
        <shiro:hasPermission name="doc:ordertaking">
            <a lay-event="ordertaking">
                <i class="zadmin-icon zadmin-icon-setting zadmin-oper-area zadmin-blue" title="接单"></i>
            </a>
		</shiro:hasPermission>
		
		<shiro:hasPermission name="doc:canneldistribution">
			<a lay-event="canneldistribution">
                <i class="zadmin-icon zadmin-icon-xintubiao- zadmin-oper-area zadmin-orange" title="取消分配"></i>
            </a>
        </shiro:hasPermission>
		
		<shiro:hasPermission name="doc:remove">
			<a lay-event="remove">
                <i class="zadmin-icon zadmin-icon-delete zadmin-oper-area zadmin-red" title="取消订单"></i>
            </a>
        </shiro:hasPermission>
    </script>
    
    <script type="text/html" id="op-column-toolbar">
		<shiro:hasPermission name="doc:info">
			<a lay-event="docinfo_0">
                <i class="zadmin-icon zadmin-icon-xinzeng zadmin-oper-area zadmin-blue" title="订单信息"></i>
            </a>
        </shiro:hasPermission>

        <shiro:hasPermission name="doc:surgicalrecords">
            <a lay-event="surgicalrecords">
                <i class="zadmin-icon zadmin-icon-setting zadmin-oper-area zadmin-blue" title="填写手术详情"></i>
            </a>
		</shiro:hasPermission>

		<shiro:hasPermission name="doc:transferorder">
            <a lay-event="transferorder">
                <i class="zadmin-icon zadmin-icon-zhidingmian zadmin-oper-area zadmin-green" title="转单"></i>
            </a>
		</shiro:hasPermission>

		<shiro:hasPermission name="doc:rtorder">
            <a lay-event="rtorder">
                <i class="zadmin-icon zadmin-icon-delete zadmin-oper-area zadmin-red" title="撤销接单"></i>
            </a>
		</shiro:hasPermission>

		<shiro:hasPermission name="doc:remove">
			<a lay-event="remove">
                <i class="zadmin-icon zadmin-icon-delete zadmin-oper-area zadmin-red" title="取消订单"></i>
            </a>
        </shiro:hasPermission>
    </script>
    
    <script type="text/html" id="wd-column-toolbar">
        <shiro:hasPermission name="doc:completeorder">
            <a lay-event="completeorder">
                <i class="zadmin-icon zadmin-icon-setting zadmin-oper-area zadmin-blue" title="订单完成"></i>
            </a>
		</shiro:hasPermission>
    </script>
    
    <script type="text/html" id="qx-column-toolbar">
        <shiro:hasPermission name="doc:completeRemove">
            <a lay-event="completeRemove">
                <i class="zadmin-icon zadmin-icon-delete zadmin-oper-area zadmin-red" title="确认撤销"></i>
            </a>
		</shiro:hasPermission>
		<shiro:hasPermission name="doc:cannelRemove">
            <a lay-event="cannelRemove">
                <i class="zadmin-icon zadmin-icon-wuquanxianfangwen zadmin-oper-area zadmin-blue" title="取消撤销"></i>
            </a>
		</shiro:hasPermission>
	</script>
	
 	<script type="text/html" id="ls-column-toolbar">
		<shiro:hasPermission name="doc:allinfo">
			<a lay-event="docinfo_3">
                <i class="zadmin-icon zadmin-icon-xinzeng zadmin-oper-area zadmin-blue" title="订单信息"></i>
            </a>
        </shiro:hasPermission>
    </script>
    
    <script type="text/html" id="evaluation-column-toolbar">
		<shiro:hasPermission name="doc:JgEvaluation">
			{{#if(d.hospitalEvaluate != null && d.hospitalEvaluate != '' && d.hospitalEvaluate != '-1') { }}
				<span>{{d.hospitalEvaluate}}星</span>
			{{# }else{ }}
            	<a lay-event="JgEvaluation">
                	<i class="zadmin-icon zadmin-icon-setting zadmin-oper-area zadmin-red" title="评价"></i>
            	</a>
			{{# } }}
		</shiro:hasPermission>
		<shiro:hasPermission name="doc:DrEvaluation">
			{{#if(d.doctorEvaluate != null &&  d.doctorEvaluate != '' && d.doctorEvaluate != '-1') { }}
				<span>{{d.doctorEvaluate}}星</span>
			{{# }else{ }}
            	<a lay-event="DrEvaluation">
       				<i class="zadmin-icon zadmin-icon-setting zadmin-oper-area zadmin-red" title="评价"></i>
         		</a>
			{{# } }}
      		
		</shiro:hasPermission>
    </script>
    
    <script type="text/html" id="jg-column-toolbar">
		<shiro:hasPermission name="doc:info">
			<a lay-event="remove">
                <i class="zadmin-icon zadmin-icon-xinzeng zadmin-oper-area zadmin-blue" title="订单信息"></i>
            </a>
        </shiro:hasPermission>

		<shiro:hasPermission name="doc:remove">
			<a lay-event="remove">
                <i class="zadmin-icon zadmin-icon-delete zadmin-oper-area zadmin-red" title="取消订单"></i>
            </a>
        </shiro:hasPermission>
    </script>
    
    <script type="text/html" id="statusTpl">
		{{ d.status == '1' ? '正常' : '锁定' }}
    </script>
    
    <script type="text/html" id="patienttypeTpl">
		{{# if(d.patientAge <= 16) { }}
 		  <span>儿童</span>
	    {{# } else if(d.patientAge <= 60) { }}  
		  <span>青年</span>
	    {{# } else{ }}  
		  <span>老人</span>
	    {{# }}}  
    </script>
    
    <script type="text/html" id="sexTpl">
		{{ d.patientSex == '0' ? '女' : '男' }}
    </script>
    
    <script type="text/html" id="documentTypeTpl">
		{{ d.documentType == '1' ? '加急' : '普通' }}
    </script>
    
    <script type="text/html" id="qaTeamTpl">
		<shiro:hasPermission name="doc:admin">
			{{# if(d.qaTeamId != null && d.qaTeamId != '') { }}
				<a class="layui-btn layui-btn-xs" lay-event="showTeamInfo" style="background-color:transparent;color: #00BFFF;">详情</a>
			{{# } else{ }}  
		  		<span>无团队</span>
	  		{{# }}} 
		</shiro:hasPermission>
		<shiro:hasPermission name="doc:dr">
			{{# if(d.qaTeamId != null && d.qaTeamId != '') { }}
				<a class="layui-btn layui-btn-xs" lay-event="showTeam" style="background-color:transparent;color: #00BFFF;">详情</a>
			{{# } else{ }}  
		  		<a class="layui-btn layui-btn-xs" lay-event="showTeam" style="background-color:transparent;color: #00BFFF;">创建</a>
	  		{{# }}} 
		</shiro:hasPermission>
    </script>
    
    <script type="text/html" id="JgQaTpl">
		{{ d.qaUserName == null || d.qaUserName == '' ? '' : d.qaUserName }}
    </script>
    
	<script type="text/html" id="JgQaTeamTpl">
		{{# if(d.qaTeamId != null && d.qaTeamId != '') { }}
			<a class="layui-btn layui-btn-xs" lay-event="showTeamInfo" style="background-color:transparent;color: #00BFFF;">详情</a>
		{{# } else{ }}  
		  <span>无团队</span>
	    {{# }}}  
    </script>
    
    <script th:src="@{/lib/jquery/jquery.min.js}"></script>
    <script th:src="@{/lib/layui/layui.js}"></script>
    <script th:src="@{/js/common.js}"></script>

    <script>
    /*<![CDATA[*/
        layui.config({
            base: '/lib/layui/extend/'
        }).extend({
            formSelects: 'formSelects-v4'
        }).use(['table', 'element', 'form', 'formSelects', 'tablePlug','laydate'], function () {
            var table = layui.table;
            var $ = layui.$;
            var form = layui.form;
            var tablePlug = layui.tablePlug,
            formSelects = layui.formSelects,
            laydate = layui.laydate;
            
            tablePlug.smartReload.enable(true);
            
            formSelects.config('org-select', {
            	clearInput: true,
            	searchType: "title"
		 	}, true);
            
            //时间控件
            laydate.render({
                elem: '#doc_table_0_date'
            	,type: 'date'
            	,calendar: true
        	});
            
            laydate.render({
                elem: '#doc_table_1_date'
            	,type: 'date'
            	,calendar: true
        	});
            
            laydate.render({
                elem: '#doc_table_2_date'
            	,type: 'date'
            	,calendar: true
        	});
            
            laydate.render({
                elem: '#doc_table_3_date'
            	,type: 'date'
            	,calendar: true
        	});
            
            laydate.render({
                elem: '#doc_table_4_date'
            	,type: 'date'
            	,calendar: true
        	});
            
            laydate.render({
                elem: '#doc_table_5_operateStartTime'
            	,type: 'date'
            	,calendar: true
        	});
            laydate.render({
                elem: '#doc_table_5_operateEndTime'
            	,type: 'date'
            	,calendar: true
        	});
            
            laydate.render({
                elem: '#doc_table_6_date'
            	,type: 'date'
            	,calendar: true
        	});
            
            laydate.render({
                elem: '#doc_table_9_date'
            	,type: 'date'
            	,calendar: true
        	});
            laydate.render({
                elem: '#doc_table_123_date'
            	,type: 'date'
            	,calendar: true
        	});
            
			//表格控件
            table.render({
                elem: '#doc-table-0'
                , url: '/doc/list'
                , where: {state: '0'}
                , page: true
                , smartReloadModel: true
                , toolbar: '#doc-table-0-toolbar'
                , defaultToolbar:[]
                , cols: [
                    [
                        {field: 'documentId', title: 'ID', align: 'center',sort: true, hide: true}
                        , {field: 'operateStartTime', title: '手术时间', align: 'center',sort: true, width:'15%'}
                        , {field: 'patientName', title: '姓名', align: 'center',sort: true, width:'8%'}
                        , {field: 'patientAge', title: '年龄', align: 'center',sort: true, width:'5%'}
                        , {field: 'patientSex', title: '性别', templet: '#sexTpl', unresize: true, align: 'center',sort: true, width:'5%'}
                        , {field: 'operativeName', title: '手术名称', align: 'center',sort: true, width:'20%'}
                        , {field: 'anestheticName', title: '麻醉方法', align: 'center',sort: true, width:'12%'}
                        , {field: 'orgName', title: '订单来源', align: 'center',sort: true, width:'15%'}
                        , {field: 'documentType', title: '订单类型', templet: '#documentTypeTpl', unresize: true, align: 'center',sort: true, width:'10%'}
                        , {title: '操作', fixed: 'right', align: 'center', toolbar: '#sh-column-toolbar'}
                    ]
                ]
            });
            
            table.render({
                elem: '#doc-table-1'
                , url: '/doc/list'
                , where: {state: '1'}
                , page: true
                , smartReloadModel: true
                , toolbar: '#doc-table-1-toolbar'
             	, defaultToolbar:[]
                , cols: [
                    [
                        {field: 'documentId', title: 'ID', align: 'center',sort: true, hide: true}
                        , {field: 'operateStartTime', title: '手术时间', align: 'center',sort: true, width:'15%'}
                        , {field: 'patientName', title: '姓名', align: 'center',sort: true, width:'8%'}
                        , {field: 'patientAge', title: '年龄', align: 'center',sort: true, width:'5%'}
                        , {field: 'patientSex', title: '性别', templet: '#sexTpl', unresize: true, align: 'center',sort: true, width:'5%'}
                        , {field: 'operativeName', title: '手术名称', align: 'center',sort: true, width:'20%'}
                        , {field: 'anestheticName', title: '麻醉方法', align: 'center',sort: true, width:'12%'}
                        , {field: 'orgName', title: '订单来源', align: 'center',sort: true, width:'15%'}
                        , {field: 'documentType', title: '订单类型', templet: '#documentTypeTpl', unresize: true, align: 'center',sort: true, width:'10%'}
                        , {title: '操作', fixed: 'right', align: 'center', toolbar: '#fp-column-toolbar'}
                    ]
                ]
            });
            
            table.render({
                elem: '#doc-table-2'
                , url: '/doc/list'
                , where: {state: '2'}
                , page: true
                , smartReloadModel: true
                , toolbar: '#doc-table-2-toolbar'
           		, defaultToolbar:[]
                , cols: [
                    [
                        {field: 'documentId', title: 'ID', align: 'center',sort: true, hide: true}
                        , {field: 'operateStartTime', title: '手术时间', align: 'center',sort: true, width:'15%'}
                        , {field: 'patientName', title: '姓名', align: 'center',sort: true, width:'8%'}
                        , {field: 'patientAge', title: '年龄', align: 'center',sort: true, width:'5%'}
                        , {field: 'patientSex', title: '性别', templet: '#sexTpl', unresize: true, align: 'center',sort: true, width:'5%'}
                        , {field: 'operativeName', title: '手术名称', align: 'center',sort: true, width:'20%'}
                        , {field: 'anestheticName', title: '麻醉方法', align: 'center',sort: true, width:'12%'}
                        , {field: 'orgName', title: '订单来源', align: 'center',sort: true, width:'15%'}
                        , {field: 'qaUserName', title: '主麻', align: 'center',sort: true, width:'10%'}
                        , {title: '操作', fixed: 'right', align: 'center', toolbar: '#jd-column-toolbar'}
                    ]
                ]
            });
            
            table.render({
                elem: '#doc-table-3'
                , url: '/doc/list'
                , where: {state: '3'}
                , page: true
                , smartReloadModel: true
                , toolbar: '#doc-table-3-toolbar'
             	, defaultToolbar:[]
                , cols: [
                    [
                        {field: 'documentId', title: 'ID', align: 'center',sort: true, hide: true}
                        , {field: 'operateStartTime', title: '手术时间', align: 'center',sort: true, width:'15%'}
                        , {field: 'patientName', title: '姓名', align: 'center',sort: true, width:'8%'}
                        , {field: 'patientAge', title: '年龄', align: 'center',sort: true, width:'5%'}
                        , {field: 'patientSex', title: '性别', templet: '#sexTpl', unresize: true, align: 'center',sort: true, width:'5%'}
                        , {field: 'operativeName', title: '手术名称', align: 'center',sort: true, width:'15%'}
                        , {field: 'anestheticName', title: '麻醉方法', align: 'center',sort: true, width:'10%'}
                        , {field: 'orgName', title: '订单来源', align: 'center',sort: true, width:'15%'}
                        , {field: 'qaUserName', title: '主麻', align: 'center',sort: true, width:'8%'}
                        , {field: 'qaTeamId', title: '团队', templet: '#qaTeamTpl', unresize: true, align: 'center',sort: true, width:'8%'}
                        , {title: '操作', fixed: 'right', align: 'center', toolbar: '#op-column-toolbar'}
                    ]
                ]
            });
            
            table.render({
                elem: '#doc-table-4'
                , url: '/doc/list'
                , where: {state: '4'}
                , page: true
                , smartReloadModel: true
                , toolbar: '#doc-table-4-toolbar'
             	, defaultToolbar:[]
                , cols: [
                    [
                        {field: 'documentId', title: 'ID', align: 'center',sort: true, hide: true}
                        , {field: 'operateStartTime', title: '手术时间', align: 'center',sort: true, width:'15%'}
                        , {field: 'patientName', title: '姓名', align: 'center',sort: true, width:'8%'}
                        , {field: 'patientAge', title: '年龄', align: 'center',sort: true, width:'5%'}
                        , {field: 'patientSex', title: '性别', templet: '#sexTpl', unresize: true, align: 'center',sort: true, width:'5%'}
                        , {field: 'operativeName', title: '手术名称', align: 'center',sort: true, width:'20%'}
                        , {field: 'anestheticName', title: '麻醉方法', align: 'center',sort: true, width:'12%'}
                        , {field: 'orgName', title: '订单来源', align: 'center',sort: true, width:'15%'}
                        , {field: 'qaUserName', title: '主麻', align: 'center',sort: true, width:'8%'}
                        , {title: '操作', fixed: 'right', align: 'center', toolbar: '#wd-column-toolbar'}
                    ]
                ]
            });
            
            table.render({
                elem: '#doc-table-9'
                , url: '/doc/list'
                , where: {state: '9'}
                , page: true
                , smartReloadModel: true
                , toolbar: '#doc-table-9-toolbar'
            	, defaultToolbar:[]
                , cols: [
                    [
                        {field: 'documentId', title: 'ID', align: 'center',sort: true, hide: true}
                        , {field: 'operateStartTime', title: '手术时间', align: 'center',sort: true, width:'15%'}
                        , {field: 'patientName', title: '姓名', align: 'center',sort: true, width:'8%'}
                        , {field: 'patientAge', title: '年龄', align: 'center',sort: true, width:'5%'}
                        , {field: 'patientSex', title: '性别', templet: '#sexTpl', unresize: true, align: 'center',sort: true, width:'5%'}
                        , {field: 'operativeName', title: '手术名称', align: 'center',sort: true, width:'20%'}
                        , {field: 'orgName', title: '订单来源', align: 'center',sort: true, width:'15%'}
                        , {field: 'deleteReason', title: '取消原因', align: 'center',sort: true, width:'20%'}
                        , {title: '操作', fixed: 'right', align: 'center', toolbar: '#qx-column-toolbar'}
                    ]
                ]
            });
            
            table.render({
                elem: '#doc-table-5'
                , url: '/doc/list'
                , where: {state: '5'}
                , page: true
                , smartReloadModel: true
                , defaultToolbar:[]
                , cols: [
                    [
                        {field: 'documentId', title: 'ID', align: 'center',sort: true, hide: true}
                        , {field: 'operateStartTime', title: '手术时间', align: 'center',sort: true, width:'15%'}
                        , {field: 'patientName', title: '姓名', align: 'center',sort: true, width:'8%'}
                        , {field: 'patientAge', title: '年龄', align: 'center',sort: true, width:'5%'}
                        , {field: 'patientSex', title: '性别', templet: '#sexTpl', unresize: true, align: 'center',sort: true, width:'5%'}
                        , {field: 'operativeName', title: '手术名称', align: 'center',sort: true, width:'20%'}
                        , {field: 'anestheticName', title: '麻醉方法', align: 'center',sort: true, width:'12%'}
                        , {field: 'orgName', title: '订单来源', align: 'center',sort: true, width:'10%'}
                        , {field: 'documentType', title: '订单类型', templet: '#documentTypeTpl', unresize: true, align: 'center',sort: true, width:'7%'}
                        , {field: 'qaUserName', title: '主麻', templet: '#JgQaTpl', unresize: true, align: 'center',sort: true, width:'8%'}
                        , {title: '评分', fixed: 'right', align: 'center', toolbar: '#evaluation-column-toolbar'}
                        , {title: '操作', fixed: 'right', align: 'center', toolbar: '#ls-column-toolbar'}
                    ]
                ]
            });
            
            table.render({
                elem: '#doc-table-6'
                , url: '/doc/list'
                , where: {state: '6'}
                , page: true
                , smartReloadModel: true
                , toolbar: '#doc-table-6-toolbar'
                , defaultToolbar:[]
                , cols: [
                    [
                        {field: 'documentId', title: 'ID', align: 'center',sort: true, hide: true}
                        , {field: 'operateStartTime', title: '手术时间', align: 'center',sort: true, width:'15%'}
                        , {field: 'patientName', title: '姓名', align: 'center',sort: true, width:'8%'}
                        , {field: 'patientAge', title: '年龄', align: 'center',sort: true, width:'5%'}
                        , {field: 'patientSex', title: '性别', templet: '#sexTpl', unresize: true, align: 'center',sort: true, width:'5%'}
                        , {field: 'operativeName', title: '手术名称', align: 'center',sort: true, width:'20%'}
                        , {field: 'orgName', title: '订单来源', align: 'center',sort: true, width:'15%'}
                        , {field: 'deleteReason', title: '取消原因', align: 'center',sort: true, width:'32%'}
                    ]
                ]
            });
            
            table.render({
                elem: '#doc-table-123'
                , url: '/doc/list'
                , where: {state: "'1','2','3'"}
                , page: true
                , smartReloadModel: true
                , toolbar: '#doc-table-123-toolbar'
             	, defaultToolbar:[]
                , cols: [
                    [
                        {field: 'documentId', title: 'ID', align: 'center',sort: true, hide: true}
                        , {field: 'operateStartTime', title: '手术时间', align: 'center',sort: true, width:'15%'}
                        , {field: 'patientName', title: '姓名', align: 'center',sort: true, width:'8%'}
                        , {field: 'patientAge', title: '年龄', align: 'center',sort: true, width:'5%'}
                        , {field: 'patientSex', title: '性别', templet: '#sexTpl', unresize: true, align: 'center',sort: true, width:'5%'}
                        , {field: 'operativeName', title: '手术名称', align: 'center',sort: true, width:'15%'}
                        , {field: 'anestheticName', title: '麻醉方法', align: 'center',sort: true, width:'10%'}
                        , {field: 'orgName', title: '订单来源', align: 'center',sort: true, width:'15%'}
                        , {field: 'qaUserName', title: '主麻', templet: '#JgQaTpl', unresize: true, align: 'center',sort: true, width:'8%'}
                        , {field: 'qaTeamId', title: '团队', templet: '#JgQaTeamTpl', unresize: true, align: 'center',sort: true, width:'8%'}
                        , {title: '操作', fixed: 'right', align: 'center', toolbar: '#jg-column-toolbar'}
                    ]
                ]
            });
            
            table.on('tool', function (obj) {
                var data = obj.data;
                var event = obj.event;
                if (event === 'examine') {
                	layer.open({
                		content: '/doc/examine?documentId=' + data.documentId,
                     	title: "订单审核",
                     	area: ['100%', '100%'],
                     	type: 2,
                     	maxmin: true,
                     	shadeClose: true,
                     	end: function () {
                     		getStateCount();
                         	table.reload('doc-table-0');
                         	table.reload('doc-table-1');
                     	}
                 	});
                }else if(event === 'distribution'){
                	layer.open({
                		content: '/doc/distribution?documentId=' + data.documentId,
                     	title: "订单分配",
                     	area: ['100%', '100%'],
                     	type: 2,
                     	maxmin: true,
                     	shadeClose: true,
                     	end: function () {
                     		getStateCount();
                         	table.reload('doc-table-1');
                         	table.reload('doc-table-2');
                     	}
                 	});
                }else if(event === 'canneldistribution'){
                	layer.confirm("确认分配取消？", {icon: 3, title: '取消分配'},
             				function (index) {
                    			//调用后台
    		                	$.post('/doc/canneldistribution', {
    		     					'id': data.documentId
    		     					}, function (result) {
    		     						layer.close(index);
    		     						getStateCount();
    		     						table.reload('doc-table-1');
    		                         	table.reload('doc-table-2');
    			                });
                   			}
        			);
                }else if(event === 'ordertaking'){
                	layer.open({
                		content: '/doc/ordertaking?documentId=' + data.documentId,
                     	title: "订单信息",
                     	area: ['100%', '100%'],
                     	type: 2,
                     	maxmin: true,
                     	shadeClose: true,
                     	end: function () {
                     		getStateCount();
                         	table.reload('doc-table-2');
                         	table.reload('doc-table-3');
                     	}
                 	});
                }else if(event === 'surgicalrecords'){
                	layer.open({
                		content: '/doc/surgicalrecords?documentId=' + data.documentId,
                     	title: "手术完成",
                     	area: ['100%', '100%'],
                     	type: 2,
                     	maxmin: true,
                     	shadeClose: true,
                     	end: function () {
                     		getStateCount();
                         	table.reload('doc-table-3');
                         	table.reload('doc-table-4');
                     	}
                 	});
                }else if(event === 'transferorder'){
                	layer.open({
                		content: '/doc/transferorder?documentId=' + data.documentId,
                     	title: "转单",
                     	area: ['100%', '100%'],
                     	type: 2,
                     	maxmin: true,
                     	shadeClose: true,
                     	end: function () {
                     		getStateCount();
                         	table.reload('doc-table-3');
                     	}
                 	});
                }else if(event === 'remove'){
                	layer.open({
                		content: '/doc/remove?documentId=' + data.documentId,
                     	title: "撤销订单",
                     	area: ['100%', '100%'],
                     	type: 2,
                     	maxmin: true,
                     	shadeClose: true,
                     	end: function () {
                     		getStateCount();
                         	table.reload('doc-table-' + data.documentState);
                         	table.reload('doc-table-9');
                     	}
                 	});
                }else if(event === 'completeRemove'){
                	layer.confirm("确认撤销订单？", {icon: 3, title: '确认撤销'},
          				function (index) {
                				//调用后台
               				$.post('/doc/completeRemove', {
                					'id': data.documentId
                					}, function (result) {
               					layer.close(index);
               					getStateCount();
               					table.reload('doc-table-9');
   			                });
          				}
            		);
                }else if(event === 'cannelRemove'){
                	layer.confirm("取消撤销订单？", {icon: 3, title: '取消撤销'},
         				function (index) {
                			//调用后台
		                	$.post('/doc/cannelRemove', {
		     					'id': data.documentId,
		     					'state': data.oldDocumentState
		     					}, function (result) {
		     						layer.close(index);
		     						getStateCount();
		     						table.reload('doc-table-' + data.oldDocumentState);
		                         	table.reload('doc-table-9');
			                });
               			}
    				);
                }else if(event === 'rtorder'){
                	var strConfirm = "确认撤销接单状态？";
                	if(data.transferUserId != null && data.transferUserId != ''){
                		strConfirm = "确认撤销转单？"
                	}
                	layer.confirm(strConfirm, {icon: 3, title: '撤销接单'},
             			function (index) {
                    			//调用后台
    		                	$.post('/doc/rtorder', {
    		     					'id': data.documentId,
    		     					'qaid' : data.transferUserId,
    		     					'state': data.oldDocumentState
    		     					}, function (result) {
    		     						layer.close(index);
    		     						getStateCount();
    		     						table.reload('doc-table-2');
    		     						table.reload('doc-table-3');
    			                });
                  		}
       				);
                }else if(event === 'showTeam'){
                	layer.open({
                		content: '/doc/showTeam?documentId=' + data.documentId,
                     	title: "团队显示",
                     	area: ['100%', '100%'],
                     	type: 2,
                     	maxmin: true,
                     	shadeClose: true,
                        move: false,
                     	end: function () {
                     		getStateCount();
                     		table.reload('doc-table-3');
                     	}
                	});
                }else if(event === 'showTeamInfo'){
                	layer.open({
                		content: '/doc/showTeamInfo?documentId=' + data.documentId,
                     	title: "团队显示",
                     	area: ['100%', '100%'],
                     	type: 2,
                     	maxmin: true,
                     	shadeClose: true,
                        move: false,
                     	end: function () {
                     	}
                	});
                }else if(event === 'DrEvaluation'){
                	layer.open({
                		content: '/doc/drevaluation?documentId=' + data.documentId + "&type=1",
                     	title: "医生评价",
                     	area: ['300px', '500px'],
                     	type: 2,
                     	maxmin: false,
                     	shadeClose: true,
                        move: true,
                     	end: function () {
                     		getStateCount();
                     		table.reload('doc-table-5');
                     	}
                	});
                }else if(event === 'JgEvaluation'){
                	layer.open({
                		content: '/doc/jgevaluation?documentId=' + data.documentId + "&type=0",
                     	title: "机构评价",
                     	area: ['300px', '500px'],
                     	type: 2,
                     	maxmin: false,
                     	shadeClose: true,
                        move: true,
                     	end: function () {
                     		getStateCount();
                     		table.reload('doc-table-5');
                     	}
                	});
                }else if(event === 'completeorder'){
                	layer.open({
                		content: '/doc/docInfo?documentId=' + data.documentId + "&state=2",
                     	title: "订单信息",
                     	area: ['100%', '100%'],
                     	type: 2,
                     	maxmin: true,
                     	shadeClose: true,
                        move: false,
                     	end: function () {
                     		getStateCount();
                     		table.reload('doc-table-4');
                     		table.reload('doc-table-5');
                     	}
                	});
                }else if(event === 'docinfo_3'){
                	layer.open({
                		content: '/doc/docInfo?documentId=' + data.documentId + "&state=3",
                     	title: "订单信息",
                     	area: ['100%', '100%'],
                     	type: 2,
                     	maxmin: true,
                     	shadeClose: true,
                        move: false,
                     	end: function () {
                     	}
                	});
                }else if(event === 'docinfo_0'){
                	layer.open({
                		content: '/doc/docInfo?documentId=' + data.documentId + "&state=0",
                     	title: "订单信息",
                     	area: ['100%', '100%'],
                     	type: 2,
                     	maxmin: true,
                     	shadeClose: true,
                        move: false,
                     	end: function () {
                     	}
                	});
                }
            });

          	//查询条件
            table.on('toolbar(doc-table-0)', function (obj) {
            	var data = obj.data;
            	if(obj.event === 'doc_table_0_search'){
            		active_0["reload"] ? active_0["reload"].call(this) : '';
                }
            });
            
            var active_0 = {
           		reload: function(){
     	      		table.reload('doc-table-0', {
     	      		url: '/doc/list',
     		       	where: {
     		       		state: '0', 
     		       		date: $('#doc_table_0_date').val(),
     		       		patientName: $('#doc_table_0_patientName').val()
     		    	}
     	      		});
           		}
          	};
            
            table.on('toolbar(doc-table-1)', function (obj) {
            	var data = obj.data;
            	if(obj.event === 'doc_table_1_search'){
            		active_1["reload"] ? active_1["reload"].call(this) : '';
                }
            });
            
            var active_1 = {
           		reload: function(){
     	      		table.reload('doc-table-1', {
     	      		url: '/doc/list',
     		       	where: {
     		       		state: '1', 
     		       		date: $('#doc_table_1_date').val(),
     		       		patientName: $('#doc_table_1_patientName').val()
     		    	}
     	      		});
           		}
          	};
            
            table.on('toolbar(doc-table-2)', function (obj) {
            	var data = obj.data;
            	if(obj.event === 'doc_table_2_search'){
            		active_2["reload"] ? active_2["reload"].call(this) : '';
                }
            });
            
            var active_2 = {
           		reload: function(){
     	      		table.reload('doc-table-2', {
     	      		url: '/doc/list',
     		       	where: {
     		       		state: '2', 
     		       		date: $('#doc_table_2_date').val(),
     		       		patientName: $('#doc_table_2_patientName').val()
     		    	}
     	      		});
           		}
          	};
            
            table.on('toolbar(doc-table-3)', function (obj) {
            	var data = obj.data;
            	if(obj.event === 'doc_table_3_search'){
            		active_3["reload"] ? active_3["reload"].call(this) : '';
                }
            });
            
            var active_3 = {
           		reload: function(){
     	      		table.reload('doc-table-3', {
     	      		url: '/doc/list',
     		       	where: {
     		       		state: '3', 
     		       		date: $('#doc_table_3_date').val(),
     		       		patientName: $('#doc_table_3_patientName').val()
     		    	}
     	      		});
           		}
          	};
            
            table.on('toolbar(doc-table-4)', function (obj) {
            	var data = obj.data;
            	if(obj.event === 'doc_table_4_search'){
            		active_4["reload"] ? active_4["reload"].call(this) : '';
                }
            });
            
            var active_4 = {
           		reload: function(){
     	      		table.reload('doc-table-4', {
     	      		url: '/doc/list',
     		       	where: {
     		       		state: '4', 
     		       		date: $('#doc_table_4_date').val(),
     		       		patientName: $('#doc_table_4_patientName').val()
     		    	}
     	      		});
           		}
          	};
            
            table.on('toolbar(doc-table-9)', function (obj) {
            	var data = obj.data;
            	if(obj.event === 'doc_table_9_search'){
            		active_9["reload"] ? active_9["reload"].call(this) : '';
                }
            });
            
            var active_9 = {
           		reload: function(){
     	      		table.reload('doc-table-9', {
     	      		url: '/doc/list',
     		       	where: {
     		       		state: '9', 
     		       		date: $('#doc_table_9_date').val(),
     		       		patientName: $('#doc_table_9_patientName').val()
     		    	}
     	      		});
           		}
          	};
            
            table.on('toolbar(doc-table-6)', function (obj) {
            	var data = obj.data;
            	if(obj.event === 'doc_table_6_search'){
            		active_6["reload"] ? active_6["reload"].call(this) : '';
                }
            });
            
            var active_6 = {
           		reload: function(){
     	      		table.reload('doc-table-6', {
     	      		url: '/doc/list',
     		       	where: {
     		       		state: '6', 
     		       		date: $('#doc_table_6_date').val(),
     		       		patientName: $('#doc_table_6_patientName').val()
     		    	}
     	      		});
           		}
          	};
            
            table.on('toolbar(doc-table-123)', function (obj) {
            	var data = obj.data;
            	if(obj.event === 'doc_table_123_search'){
            		active_123["reload"] ? active_123["reload"].call(this) : '';
                }
            });
            
            var active_123 = {
           		reload: function(){
     	      		table.reload('doc-table-123', {
     	      		url: '/doc/list',
     		       	where: {
     		       		state: "'1','2','3'", 
     		       		date: $('#doc_table_123_date').val(),
     		       		patientName: $('#doc_table_123_patientName').val()
     		    	}
     	      		});
           		}
          	};
        });
    
        function doc_table_5_search(){
        	layui.config({
                base: '/lib/layui/extend/'
            }).extend({
                formSelects: 'formSelects-v4'
            }).use(['table', 'formSelects'], function () {
                var table = layui.table;
                var $ = layui.$;
                var formSelects = layui.formSelects;
            	
            	var orgValue = formSelects.value('org-select', 'valStr');
            	
	 	  		table.reload('doc-table-5', {
	 	      		url: '/doc/list',
	 		       	where: {
	 		       		state: '5', 
	 		       		beginDate: $('#doc_table_5_operateStartTime').val(),
	 		       		endDate: $('#doc_table_5_operateEndTime').val(),
	 		       		qaUserName: $('#doc_table_5_qaUserName').val(),
	 		       		patientName: $('#doc_table_5_patientName').val(),
	 		       		orgId:orgValue
	 		    	}
	 	    	});
            });
        }
        
        function doc_table_5_export(){
        	layui.config({
		   		base: '/lib/layui/extend/'
			}).extend({
		    	formSelects: 'formSelects-v4'
			}).use(['table', 'formSelects'], function () {
		  		var table = layui.table;
		   		var $ = layui.$;
	    		var formSelects = layui.formSelects;
		     	
		     	var orgValue = formSelects.value('org-select', 'valStr');
        	
	        	var parms = "state=5&beginDate=" + $('#doc_table_5_operateStartTime').val() + "&endDate=" + $('#doc_table_5_operateEndTime').val() + "&qaUserName=" + $('#doc_table_5_qaUserName').val() + "&patientName=" + $('#doc_table_5_patientName').val() + "&orgId=" + orgValue;
	        	var elemIF = document.createElement("iframe");
	    		elemIF.src = "/doc/exportHistoryDocList?" + parms;
	    		elemIF.style.display = "none";
	    		document.body.appendChild(elemIF);
    		
    		

            	
//             	$.ajax({
//                     url: "/doc/list",
//                     data: {
//                     	state: '5', 
// 	 		       		beginDate: $('#doc_table_5_operateStartTime').val(),
// 	 		       		endDate: $('#doc_table_5_operateEndTime').val(),
// 	 		       		qaUserName: $('#doc_table_5_qaUserName').val(),
// 	 		       		patientName: $('#doc_table_5_patientName').val(),
// 	 		       		orgId:orgValue
//                     },
//                     async: false,
//                     dataType: 'json',
//                     success: function (res) {
//                         table.exportFile('doc-table-5', res.data, 'xls');
//                     }
//                 });
            });
        }
        
        function getStateCount(){
        	$.ajax({
         		url: "/doc/getStateCount",
	             async: false,
	             dataType: 'json',
	             success: function (res) {
	            	 var cloneData = res.data;
	            	 if(cloneData != null){
	            		 if($("#sc_icount_0").length > 0){
	            			 $("#sc_icount_0").text(cloneData.iCount_0);
	            		 }
	            		 if($("#sc_icount_1").length > 0){
	            			 $("#sc_icount_1").text(cloneData.iCount_1);
	            		 }
	            		 if($("#sc_icount_2").length > 0){
	            			 $("#sc_icount_2").text(cloneData.iCount_2);
	            		 }
	            		 if($("#sc_icount_3").length > 0){
	            			 $("#sc_icount_3").text(cloneData.iCount_3);
	            		 }
	            		 if($("#sc_icount_4").length > 0){
	            			 $("#sc_icount_4").text(cloneData.iCount_4);
	            		 }
	            		 if($("#sc_icount_9").length > 0){
	            			 $("#sc_icount_9").text(cloneData.iCount_9);
	            		 }
	            		 if($("#sc_icount_123").length > 0){
	            			 $("#sc_icount_123").text(cloneData.iCount_123);
	            		 }
	            	 }
	             }
         	});
        }
        
    </script>
</body>

</html>